(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{renderAProject:()=>d,renderProjectList:()=>i,renderToday:()=>c,renderTodoList:()=>s,renderWeek:()=>l});var n={};e.r(n),e.d(n,{addButton:()=>k,addProjectModal:()=>g,addTaskModal:()=>j,checkProjectListForActiveProject:()=>L,createElement:()=>v,createProjectArray:()=>w,createProjectListElement:()=>S,createTaskArray:()=>b,filterTasksToday:()=>I,filterTasksWeek:()=>A,findProjectIndexByName:()=>T,getCurrentWeek:()=>C,isCurrentWeek:()=>P,projectList:()=>y,removeAllChildren:()=>E,sidebarButtons:()=>h,viewContainer:()=>D});class a{constructor(e,t){this.name=e,this.creationDate=(new Date).toLocaleDateString(),this.creationDateEpoch=(new Date).getTime(),this.dueDate=new Date(t),this.isDone=!1}setName(e){this.name=e}getName(){return this.name}setCreationDate(){}getCreationDate(){return this.creationDate}setDueDate(e){}getDueDate(){return this.dueDate}setIsDone(e){"boolean"==typeof e&&(this.isDone=e)}getIsDone(){return this.isDone}}class o{constructor(e){this.name=e,this.projectId=o.incrementId(),this.creationDate=(new Date).toLocaleDateString("de-DE"),this.creationDateEpoch=(new Date).getTime(),this.tasks=[]}static incrementId(){return this.latestId||0==this.latestId?this.latestId++:this.latestId=0,this.latestId}setName(e){this.name=e}getName(){return this.name}addTask(e){this.tasks.push(e)}removeTask(e){this.tasks.splice(e,1)}}class r{constructor(e){this.projects=[]}addProject(e){this.projects.push(e)}removeProject(e){this.projects[e]=void 0}allTasks(){const e=[];return this.projects.forEach((t=>{null!=t&&t.tasks.forEach((t=>e.push(t)))})),e}}function s(e){if(!(e instanceof r))throw Error("Input is not a TodoList Instance");E(document.querySelector(".project-ul")),E(D),k.remove(),i(e),e.projects.forEach((e=>{null!=e&&w(e).forEach((e=>D.appendChild(e)))}))}function i(e){const t=document.querySelector(".project-ul");E(t),e.projects.forEach((e=>{if(null==e)return;const n=S(e);t.appendChild(n)}))}function c(){let e=b(I());0==e.length&&console.log("toRender empty"),E(D),k.remove(),e.forEach((e=>D.appendChild(e)))}function l(){const e=b(A());E(D),k.remove(),e.forEach((e=>D.appendChild(e)))}function d(e,t=!1){const n=w(e);t&&n.forEach((e=>{if(e.classList.contains("task-container")){const t=v("span","project-task-delete");t.innerHTML="&times;",t.addEventListener("click",f),e.appendChild(t)}})),E(D),document.querySelector("#content-container").appendChild(utils.addButton),n.forEach((e=>{e.classList.contains("task-container")&&(e.childNodes.forEach((e=>{e.classList.contains("task-name")&&(e.contentEditable=!0)})),e.childNodes[0].addEventListener("keypress",m),e.childNodes[0].addEventListener("blur",p))})),n.forEach((e=>D.appendChild(e)))}function u(e){if("SPAN"==e.target.tagName){if(confirm("Are You Sure?")){const t=e.target.parentElement.attributes["project-data"].value;defaultToDoList.removeProject(t),i(defaultToDoList),E(D),k.remove()}return}if("dblclick"==e.type)return e.target.onblur=e=>{const t=e.target.parentElement.attributes["project-data"].value;defaultToDoList.projects[t].setName(e.target.textContent),e.target.contentEditable=!1},void(e.target.classList.contains("project-name")&&(e.target.contentEditable=!0,e.target.focus()));Array.from(document.querySelector(".project-ul").childNodes).forEach((e=>e.attributes.active.value="false"));const t=e.target.parentElement.attributes["project-data"].value,n=defaultToDoList.projects[t];e.target.parentElement.attributes.active.value="true",d(n,!0)}function f(e){if(confirm("Are you sure you want to Delete this?")){const t=e.target.parentElement.attributes["project-id"].value,n=e.target.parentElement.attributes["task-id"].value;defaultToDoList.projects[t].removeTask(n),d(defaultToDoList.projects[t],!0)}}function p(e){const t=e.target.textContent,n=e.target.parentElement.attributes["project-id"].value;e.target.parentElement.attributes["task-id"].value,defaultToDoList.projects[n].setName(t)}function m(e){"Enter"===e.key&&(e.preventDefault(),e.target.blur())}const h=document.querySelectorAll(".sidebar-button"),y=document.querySelector(".project-ul"),D=document.querySelector(".view-container"),k=document.getElementById("add-task"),j=document.getElementById("addTaskModal"),g=document.getElementById("addProjectModal");function v(e,t,n=""){Array.isArray(t)&&(t=t.join(" "));const a=document.createElement(`${e}`);return void 0!==t&&(a.classList=t),a.textContent=`${n}`,a}function E(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function T(e,t=theTODOLIST){t.projects.forEach(((t,n)=>{t.name==e?console.log("found name at index: "+n):console.log("haven't found name")}))}function L(){const e=Array.from(y.children);for(const t of e){if("true"==t.attributes.active.value)return console.log("found active element"),t;console.log("found no active element")}}function b(e){if(!Array.isArray(e))throw Error("Expected Input is an Array.");const t=[];return e.forEach((e=>{if(null==e||null==e)console.log("element is null/undefined");else{const n=v("li",["task-container"]),a=v("p",`${e.name}-paragraph task-text task-name`,`${e.name}`),o=v("p",`${e.name}-paragraph task-text task-creationdate`,`${e.creationDate}`),r=v("input",`${e.name}-paragraph task-text task-duedate`);r.type="date",r.setAttribute("required",""),r.value=`${e.dueDate.toISOString().split("T")[0]}`;const s=v("p",`${e.name}-paragraph task-text task-isdone`,`${e.isDone}`);n.appendChild(a),n.appendChild(o),n.appendChild(r),n.appendChild(s),t.push(n)}})),t}function w(e){if(!(e instanceof o)&&null!=e)throw Error("Not a Instance of Project");if(null==e)return;const t=b(e.tasks),n=v("h1","view-project-heading",`${e.name}`);return t.unshift(n),t.forEach(((t,n)=>{t.setAttribute("project-id",`${e.projectId}`),t.classList.contains("task-container")&&t.setAttribute("task-id",""+(n-1)),t.classList.add(`${e.name}`)})),t}function S(e){if(!(e instanceof o)&&null!=e)throw Error("Input is not a Project Instance");if(null==e)return;const t=e.name,n=v("li",["project-li",`${t}-project`]),a=v("p","project-name",`${t}`),r=v("span","project-li-close");return r.innerHTML="&times;",n.appendChild(a),n.appendChild(r),n.setAttribute("project-data",`${e.projectId}`),n.setAttribute("active","false"),n.addEventListener("click",u),n.firstElementChild.addEventListener("dblclick",u),n}function I(e=defaultToDoList){if(!(e instanceof r))throw Error("Not an Instance of ToDoList");const t=e.allTasks(),n=(new Date).toLocaleDateString("de-DE");return t.filter((e=>{if(null!=e&&null!=e)return e.dueDate.toLocaleDateString("de-DE")==n||void 0}))}function C(){const e=new Date,t=e.getDate()-(e.getDay()+6)%7;let n=new Date(e.setDate(t));n=new Date(n.setHours(0,0,0,0));let a=new Date(e.setDate(t+6));return a=new Date(a.setHours(23,59,59,0)),{firstDay:n,lastDay:a}}function P(e){const t=C();return e>=t.firstDay.getTime()&&e<=t.lastDay.getTime()}function A(e=defaultToDoList){if(!(e instanceof r))throw Error("Not an Instance of ToDoList");return e.allTasks().filter((e=>{if(null!=e&&null!=e)return!!utils.isCurrentWeek(new Date(e.dueDate).getTime())||void 0}))}document.querySelector("#task-submit"),document.querySelector("#project-submit");const q=document.querySelector("#task-name-input"),N=document.querySelector("#task-date-input"),$=document.querySelector("#project-name-input");function B(){q.value="",N.value="",$.value=""}const x=document.getElementById("addTaskModal"),M=document.getElementById("addProjectModal"),O=document.querySelector("#add-task"),W=document.getElementsByClassName("close")[0],H=document.getElementsByClassName("close")[1];function _(e){if("task-form"==e.target.id){const t=e.target[0].value,n=e.target[1].value;x.style.display="none",B();const a=new Task(t,n),o=L();if(console.log(o),o){const e=o.attributes["project-data"].value;defaultToDoList.projects[e].addTask(a),console.log("task added succesfully"),d(defaultToDoList.projects[e],!0)}else console.log("no active project found")}if("project-form"==e.target.id){const t=e.target[0].value;M.style.display="none";const n=new Project(t);defaultToDoList.addProject(n),i(defaultToDoList),d(n,!0);const a=Array.from(document.querySelector(".project-ul").children);a.forEach((e=>e.attributes.active.value="false")),a.at(-1).attributes.active.value="true"}}O.onclick=function(){x.style.display="block"},W.onclick=function(){x.style.display="none",B()},H.onclick=function(){M.style.display="none",B()},window.onclick=function(e){e.target!=x&&e.target!=M||(x.style.display="none",M.style.display="none",B())};const F=new a("Default","2021-12-01"),R=new a("Default","2021-12-14"),Y=new o("DefaultProject"),z=new o("DefaultProjectTwo"),G=new r("DefaultToDoList");Y.addTask(F),Y.addTask(R),Y.addTask(F),z.addTask(R),z.addTask(F),z.addTask(F),G.addProject(Y),G.addProject(z),s(G),document.querySelectorAll(".project-li"),h[0].addEventListener("click",(e=>s(G))),h[1].addEventListener("click",(function(e){document.querySelectorAll(".project-li").forEach((e=>e.attributes.active.value="false")),c()})),h[2].addEventListener("click",(function(e){document.querySelectorAll(".project-li").forEach((e=>e.attributes.active.value="false")),l()})),h[3].addEventListener("click",(()=>g.style.display="block")),k.addEventListener("click",(()=>j.style.display="block")),document.getElementById("task-form").addEventListener("submit",_),document.getElementById("project-form").addEventListener("submit",_),window.ToDoList=r,window.Project=o,window.Task=a,window.utils=n,window.defaultToDoList=G,window.r=t})();
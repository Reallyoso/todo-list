(()=>{"use strict";var e={d:(t,n)=>{for(var a in n)e.o(n,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:n[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{addButton:()=>p,checkProjectListForActiveProject:()=>k,createElement:()=>h,createProjectArray:()=>g,createProjectListElement:()=>E,createTaskArray:()=>j,filterTasksToday:()=>v,filterTasksWeek:()=>y,findProjectIndexByName:()=>D,getCurrentWeek:()=>T,isCurrentWeek:()=>w,projectList:()=>u,removeAllChildren:()=>m,sidebarButtons:()=>d,viewContainer:()=>f});class n{constructor(e,t){this.name=e,this.creationDate=(new Date).toLocaleDateString("de-DE"),this.creationDateEpoch=(new Date).getTime(),this.dueDate=t,this.isDone=!1}setName(e){this.name=e}getName(){return this.name}setCreationDate(){}getCreationDate(){return this.creationDate}setDueDate(e){}getDueDate(){return this.dueDate}setIsDone(e){"boolean"==typeof e&&(this.isDone=e)}getIsDone(){return this.isDone}}class a{constructor(e){this.name=e,this.projectId=a.incrementId(),this.creationDate=(new Date).toLocaleDateString("de-DE"),this.creationDateEpoch=(new Date).getTime(),this.tasks=[]}static incrementId(){return this.latestId||0==this.latestId?this.latestId++:this.latestId=0,this.latestId}setName(e){this.name=e}getName(){return this.name}addTask(e){this.tasks.push(e)}removeTask(e){}}class o{constructor(e){this.projects=[]}addProject(e){this.projects.push(e)}removeProject(e){}allTasks(){const e=[];return this.projects.forEach((t=>{t.tasks.forEach((t=>e.push(t)))})),e}}function r(e){if(!(e instanceof o))throw Error("Input is not a TodoList Instance");const t=document.querySelector(".project-ul");m(t),m(f),e.projects.forEach((e=>{const n=E(e),a=g(e);t.appendChild(n),a.forEach((e=>f.appendChild(e)))}))}function s(e){const t=g(e);m(f),t.forEach((e=>{e.classList.contains("task-container")&&(e.childNodes.forEach((e=>{e.classList.contains("task-name")&&(e.contentEditable=!0)})),e.childNodes[0].addEventListener("keypress",l),e.childNodes[0].addEventListener("blur",c))})),t.forEach((e=>f.appendChild(e)))}function i(e){if("SPAN"==e.target.tagName)return console.log("span");if("dblclick"==e.type)return console.log("dblclick event fired");Array.from(document.querySelector(".project-ul").children).forEach((e=>e.attributes.active.value="false"));const t=e.target.parentElement.attributes["project-data"].value,n=defaultToDoList.projects[t];e.target.parentElement.attributes.active.value="true",s(n)}function c(e){console.log(e.target.textContent),e.target.textContent,e.target.parentElement.attributes["project-id"].value,e.target.parentElement.attributes["task-id"].value}function l(e){"Enter"===e.key&&(e.preventDefault(),e.target.blur())}const d=document.querySelectorAll(".sidebar-button"),u=document.querySelector(".project-ul"),f=document.querySelector(".view-container"),p=document.getElementById("add-task");function h(e,t,n=""){Array.isArray(t)&&(t=t.join(" "));const a=document.createElement(`${e}`);return void 0!==t&&(a.classList=t),a.textContent=`${n}`,a}function m(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function D(e,t=theTODOLIST){t.projects.forEach(((t,n)=>{t.name==e?console.log("found name at index: "+n):console.log("haven't found name")}))}function k(){const e=Array.from(u.children);for(const t of e){if("true"==t.attributes.active.value)return console.log("found active element"),t;console.log("found no active element")}}function j(e){if(!Array.isArray(e))throw Error("Expected Input is an Array.");const t=[];return e.forEach((e=>{if(null==e||null==e)console.log("element is null/undefined");else{const n=h("li",["task-container"]),a=h("p",`${e.name}-paragraph task-text task-name`,`${e.name}`),o=h("p",`${e.name}-paragraph task-text task-creationdate`,`${e.creationDate}`),r=h("p",`${e.name}-paragraph task-text task-duedate`,`${e.dueDate}`),s=h("p",`${e.name}-paragraph task-text task-isdone`,`${e.isDone}`);n.appendChild(a),n.appendChild(o),n.appendChild(r),n.appendChild(s),t.push(n)}})),t}function g(e){if(!(e instanceof a))throw Error("Not a Instance of Project");const t=j(e.tasks),n=h("h1","view-project-heading",`${e.name}`);return t.unshift(n),t.forEach(((t,n)=>{t.setAttribute("project-id",`${e.projectId}`),t.classList.contains("task-container")&&t.setAttribute("task-id",""+(n-1)),t.classList.add(`${e.name}`)})),t}function E(e){if(!(e instanceof a))throw Error("Input is not a Project Instance");const t=e.name,n=h("li",["project-li",`${t}-project`]),o=h("p","project-name",`${t}`),r=h("span","project-li-close");return r.innerHTML="&times;",n.appendChild(o),n.appendChild(r),n.setAttribute("project-data",`${e.projectId}`),n.setAttribute("active","false"),n.addEventListener("click",i),n.firstElementChild.addEventListener("dblclick",i),n}function v(e=defaultToDoList){if(!(e instanceof o))throw Error("Not an Instance of ToDoList");const t=e.allTasks(),n=(new Date).toLocaleDateString("de-DE");return t.filter((e=>{if(null!=e&&null!=e)return e.dueDate==n||void 0}))}function T(){const e=new Date,t=e.getDate()-(e.getDay()+6)%7;let n=new Date(e.setDate(t));n=new Date(n.setHours(0,0,0,0));let a=new Date(e.setDate(t+6));return a=new Date(a.setHours(23,59,59,0)),{firstDay:n,lastDay:a}}function w(e){const t=T();return e>=t.firstDay.getTime()&&e<=t.lastDay.getTime()}function y(e=defaultToDoList){if(!(e instanceof o))throw Error("Not an Instance of ToDoList");return e.allTasks().filter((e=>{if(null!=e&&null!=e)return!!utils.isCurrentWeek(new Date(e.dueDate.split(".").reverse().join("/")).getTime())||void 0}))}const L=new n("Default","1.12.2021"),b=new n("Default","10.12.2021"),C=new a("DefaultProject"),P=new a("DefaultProjectTwo"),I=new o("DefaultToDoList");C.addTask(L),C.addTask(b),C.addTask(L),P.addTask(b),P.addTask(L),P.addTask(L),I.addProject(C),I.addProject(P),r(I),document.querySelectorAll(".project-li"),d[0].addEventListener("click",(e=>r(I))),d[1].addEventListener("click",(function(){let e=j(v());0==e.length&&console.log("toRender empty"),m(f),e.forEach((e=>f.appendChild(e)))})),d[2].addEventListener("click",(function(){const e=j(y());m(f),e.forEach((e=>f.appendChild(e)))})),d[3].addEventListener("click",(function(e){console.log(e);const t=prompt("Enter Project Name: "),n=new Project(t);defaultToDoList.addProject(n),function(e){const t=document.querySelector(".project-ul");m(t),e.projects.forEach((e=>{const n=E(e);t.appendChild(n)}))}(defaultToDoList),s(n);const a=Array.from(document.querySelector(".project-ul").children);a.forEach((e=>e.attributes.active.value="false")),a.at(-1).attributes.active.value="true"})),p.addEventListener("click",(function(e){const t=prompt("Please enter TaskName: "),n=prompt("Please enter due date: "),a=new Task(t,n),o=k();if(console.log(o),o){const e=o.attributes["project-data"].value;defaultToDoList.projects[e].addTask(a),console.log("task added succesfully"),s(defaultToDoList.projects[e])}else console.log("no active project found")})),window.ToDoList=o,window.Project=a,window.Task=n,window.utils=t,window.defaultToDoList=I,window.renderTodoList=r})();